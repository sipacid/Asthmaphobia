#include "leavepeople.h"

using namespace Asthmaphobia::Features::Exploits;

LeavePeople::LeavePeople() : Feature("Leave People", "Leave whilst there are still players alive outside of the truck (HOST ONLY)", FeatureCategory::Exploits)
{
}

void LeavePeople::OnMenu()
{
	ImGui::Checkbox("Enabled##leavePeople", &std::get<bool>(EnabledSetting->GetValue()));
}

bool LeavePeople::OnExitLevelThereAreAlivePlayersOutsideTheTruck(SDK::ExitLevel* exitLevel, SDK::MethodInfo* methodInfo) const
{
	if (!std::get<bool>(EnabledSetting->GetValue()) || !Helper::IsLocalMasterClient())
		return SDK::ExitLevel_ThereAreAlivePlayersOutsideTheTruck_ptr(exitLevel, methodInfo);

	return false;
}
