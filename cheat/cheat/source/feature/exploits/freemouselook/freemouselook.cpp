#include "freemouselook.h"

using namespace Asthmaphobia::Features::Exploits;

FreeMouseLook::FreeMouseLook() : Feature("FreeMouseLook", "Disable camera restrictions. (360 view angle)", FeatureCategory::Exploits)
{
}

void FreeMouseLook::OnMenu()
{
	ImGui::Checkbox("Enabled##freeMouseLook", &std::get<bool>(EnabledSetting->GetValue()));
	DrawHotkeyUI();
}

void FreeMouseLook::OnFirstPersonController_Update(const SDK::FirstPersonController* firstPersonController, SDK::MethodInfo* methodInfo) const
{
	if (std::get<bool>(EnabledSetting->GetValue()))
	{
		firstPersonController->Fields.MouseLook->Fields.MinimumX = -360;
		firstPersonController->Fields.MouseLook->Fields.MaximumX = 360;
	}
	else
	{
		firstPersonController->Fields.MouseLook->Fields.MinimumX = -90;
		firstPersonController->Fields.MouseLook->Fields.MaximumX = 90;
	}
}
